!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?h(t):e}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const d=Math.pow(2,-52),g=new Uint32Array(512);class p{static from(t,e=A,i=x){const n=t.length,r=new Float64Array(2*n);for(let a=0;a<n;a++){const n=t[a];r[2*a]=e(n),r[2*a+1]=i(n)}return new p(r)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:i,_hullTri:n,_hullHash:r}=this,a=t.length>>1;let s=1/0,o=1/0,l=-1/0,h=-1/0;for(let e=0;e<a;e++){const i=t[2*e],n=t[2*e+1];i<s&&(s=i),n<o&&(o=n),i>l&&(l=i),n>h&&(h=n),this._ids[e]=e}const c=(s+l)/2,f=(o+h)/2;let u,g,p,v=1/0;for(let e=0;e<a;e++){const i=m(c,f,t[2*e],t[2*e+1]);i<v&&(u=e,v=i)}const b=t[2*u],S=t[2*u+1];v=1/0;for(let e=0;e<a;e++){if(e===u)continue;const i=m(b,S,t[2*e],t[2*e+1]);i<v&&i>0&&(g=e,v=i)}let A=t[2*g],x=t[2*g+1],_=1/0;for(let e=0;e<a;e++){if(e===u||e===g)continue;const i=w(b,S,A,x,t[2*e],t[2*e+1]);i<_&&(p=e,_=i)}let P=t[2*p],R=t[2*p+1];if(_===1/0){for(let e=0;e<a;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];k(this._ids,this._dists,0,a-1);const e=new Uint32Array(a);let i=0;for(let t=0,n=-1/0;t<a;t++){const r=this._ids[t];this._dists[r]>n&&(e[i++]=r,n=this._dists[r])}return this.hull=e.subarray(0,i),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(y(b,S,A,x,P,R)){const t=g,e=A,i=x;g=p,A=P,x=R,p=t,P=e,R=i}const z=function(t,e,i,n,r,a){const s=i-t,o=n-e,l=r-t,h=a-e,c=s*s+o*o,f=l*l+h*h,u=.5/(s*h-o*l);return{x:t+(h*c-o*f)*u,y:e+(s*f-l*c)*u}}(b,S,A,x,P,R);this._cx=z.x,this._cy=z.y;for(let e=0;e<a;e++)this._dists[e]=m(t[2*e],t[2*e+1],z.x,z.y);k(this._ids,this._dists,0,a-1),this._hullStart=u;let O=3;i[u]=e[p]=g,i[g]=e[u]=p,i[p]=e[g]=u,n[u]=0,n[g]=1,n[p]=2,r.fill(-1),r[this._hashKey(b,S)]=u,r[this._hashKey(A,x)]=g,r[this._hashKey(P,R)]=p,this.trianglesLen=0,this._addTriangle(u,g,p,-1,-1,-1);for(let a,s,o=0;o<this._ids.length;o++){const l=this._ids[o],h=t[2*l],c=t[2*l+1];if(o>0&&Math.abs(h-a)<=d&&Math.abs(c-s)<=d)continue;if(a=h,s=c,l===u||l===g||l===p)continue;let f=0;for(let t=0,e=this._hashKey(h,c);t<this._hashSize&&(f=r[(e+t)%this._hashSize],-1===f||f===i[f]);t++);f=e[f];let m,v=f;for(;m=i[v],!y(h,c,t[2*v],t[2*v+1],t[2*m],t[2*m+1]);)if(v=m,v===f){v=-1;break}if(-1===v)continue;let b=this._addTriangle(v,l,i[v],-1,-1,n[v]);n[l]=this._legalize(b+2),n[v]=b,O++;let w=i[v];for(;m=i[w],y(h,c,t[2*w],t[2*w+1],t[2*m],t[2*m+1]);)b=this._addTriangle(w,l,m,n[l],-1,n[w]),n[l]=this._legalize(b+2),i[w]=w,O--,w=m;if(v===f)for(;m=e[v],y(h,c,t[2*m],t[2*m+1],t[2*v],t[2*v+1]);)b=this._addTriangle(m,l,v,-1,n[v],n[m]),this._legalize(b+2),n[m]=b,i[v]=v,O--,v=m;this._hullStart=e[l]=v,i[v]=e[w]=l,i[l]=w,r[this._hashKey(h,c)]=l,r[this._hashKey(t[2*v],t[2*v+1])]=v}this.hull=new Uint32Array(O);for(let t=0,e=this._hullStart;t<O;t++)this.hull[t]=e,e=i[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:i,coords:n}=this;let r=0,a=0;for(;;){const s=i[t],o=t-t%3;if(a=o+(t+2)%3,-1===s){if(0===r)break;t=g[--r];continue}const l=s-s%3,h=o+(t+1)%3,c=l+(s+2)%3,f=e[a],u=e[t],d=e[h],p=e[c];if(b(n[2*f],n[2*f+1],n[2*u],n[2*u+1],n[2*d],n[2*d+1],n[2*p],n[2*p+1])){e[t]=p,e[s]=f;const n=i[c];if(-1===n){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,n),this._link(s,i[a]),this._link(a,c);const o=l+(s+1)%3;r<g.length&&(g[r++]=o)}else{if(0===r)break;t=g[--r]}}return a}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,i,n,r,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=i,this._link(s,n),this._link(s+1,r),this._link(s+2,a),this.trianglesLen+=3,s}}function m(t,e,i,n){const r=t-i,a=e-n;return r*r+a*a}function v(t,e,i,n,r,a){const s=(n-e)*(r-t),o=(i-t)*(a-e);return Math.abs(s-o)>=33306690738754716e-32*Math.abs(s+o)?s-o:0}function y(t,e,i,n,r,a){return(v(r,a,t,e,i,n)||v(t,e,i,n,r,a)||v(i,n,r,a,t,e))<0}function b(t,e,i,n,r,a,s,o){const l=t-s,h=e-o,c=i-s,f=n-o,u=r-s,d=a-o,g=c*c+f*f,p=u*u+d*d;return l*(f*p-g*d)-h*(c*p-g*u)+(l*l+h*h)*(c*d-f*u)<0}function w(t,e,i,n,r,a){const s=i-t,o=n-e,l=r-t,h=a-e,c=s*s+o*o,f=l*l+h*h,u=.5/(s*h-o*l),d=(h*c-o*f)*u,g=(s*f-l*c)*u;return d*d+g*g}function k(t,e,i,n){if(n-i<=20)for(let r=i+1;r<=n;r++){const n=t[r],a=e[n];let s=r-1;for(;s>=i&&e[t[s]]>a;)t[s+1]=t[s--];t[s+1]=n}else{let r=i+1,a=n;S(t,i+n>>1,r),e[t[i]]>e[t[n]]&&S(t,i,n),e[t[r]]>e[t[n]]&&S(t,r,n),e[t[i]]>e[t[r]]&&S(t,i,r);const s=t[r],o=e[s];for(;;){do{r++}while(e[t[r]]<o);do{a--}while(e[t[a]]>o);if(a<r)break;S(t,r,a)}t[i+1]=t[a],t[a]=s,n-r+1>=a-i?(k(t,e,r,n),k(t,e,i,a-1)):(k(t,e,i,a-1),k(t,e,r,n))}}function S(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function A(t){return t[0]}function x(t){return t[1]}var _="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var P=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){var i;t.exports=((i=function(){function t(t){return r.appendChild(t.dom),t}function e(t){for(var e=0;e<r.children.length;e++)r.children[e].style.display=e===t?"block":"none";n=t}var n=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(t){t.preventDefault(),e(++n%r.children.length)}),!1);var a=(performance||Date).now(),s=a,o=0,l=t(new i.Panel("FPS","#0ff","#002")),h=t(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new i.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:r,addPanel:t,showPanel:e,begin:function(){a=(performance||Date).now()},end:function(){o++;var t=(performance||Date).now();if(h.update(t-a,200),t>s+1e3&&(l.update(1e3*o/(t-s),100),s=t,o=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){a=this.end()},domElement:r,setMode:e}}).Panel=function(t,e,i){var n=1/0,r=0,a=Math.round,s=a(window.devicePixelRatio||1),o=80*s,l=48*s,h=3*s,c=2*s,f=3*s,u=15*s,d=74*s,g=30*s,p=document.createElement("canvas");p.width=o,p.height=l,p.style.cssText="width:80px;height:48px";var m=p.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,o,l),m.fillStyle=e,m.fillText(t,h,c),m.fillRect(f,u,d,g),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(f,u,d,g),{dom:p,update:function(l,v){n=Math.min(n,l),r=Math.max(r,l),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,o,u),m.fillStyle=e,m.fillText(a(l)+" "+t+" ("+a(n)+"-"+a(r)+")",h,c),m.drawImage(p,f+s,u,d-s,g,f,u,d-s,g),m.fillRect(f+d-s,u,s,g),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(f+d-s,u,s,a((1-l/v)*g))}}},i)})),R={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},z=Object.prototype.toString,O=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},T=function(t){var e,i,n=[],r=1;if("string"==typeof t)if(R[t])n=R[t].slice(),i="rgb";else if("transparent"===t)r=0,i="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var a=(l=t.slice(1)).length;r=1,a<=4?(n=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],4===a&&(r=parseInt(l[3]+l[3],16)/255)):(n=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],8===a&&(r=parseInt(l[6]+l[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var s=e[1],o="rgb"===s,l=s.replace(/a$/,"");i=l;a="cmyk"===l?4:"gray"===l?1:3;n=e[2].trim().split(/\s*,\s*/).map((function(t,e){if(/%$/.test(t))return e===a?parseFloat(t)/100:"rgb"===l?255*parseFloat(t)/100:parseFloat(t);if("h"===l[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==E[t])return E[t]}return parseFloat(t)})),s===l&&n.push(1),r=o||void 0===n[a]?1:n[a],n=n.slice(0,a)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(n=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),i=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(c=t,"[object Object]"!==z.call(c)||null!==(f=Object.getPrototypeOf(c))&&f!==Object.getPrototypeOf({}))(Array.isArray(t)||_.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(n=[t[0],t[1],t[2]],i="rgb",r=4===t.length?t[3]:1);else{var h=O(t.r,t.red,t.R,null);null!==h?(i="rgb",n=[h,O(t.g,t.green,t.G),O(t.b,t.blue,t.B)]):(i="hsl",n=[O(t.h,t.hue,t.H),O(t.s,t.saturation,t.S),O(t.l,t.lightness,t.L,t.b,t.brightness)]),r=O(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(r/=100)}else i="rgb",n=[t>>>16,(65280&t)>>>8,255&t];var c,f;return{space:i,values:n,alpha:r}},E={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var F=function(t){var e,i,n,r,a,s=t[0]/360,o=t[1]/100,l=t[2]/100;if(0===o)return[a=255*l,a,a];e=2*l-(i=l<.5?l*(1+o):l+o-l*o),r=[0,0,0];for(var h=0;h<3;h++)(n=s+1/3*-(h-1))<0?n++:n>1&&n--,a=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,r[h]=255*a;return r};var M=function(t,e,i){return t*(1-i)+e*i},I=function(t,e,i){return e<i?t<e?e:t>i?i:t:t<i?i:t>e?e:t};var j=function(t){return t=t.map((function(t){if("rgb"!=(t=T(t)).space){if("hsl"!=t.space)throw"c.spacespace is not supported.";t.values=F(t.values)}return t.values.push(t.alpha),t.values})),function(e,i){i=i||M,e=I(e,0,1);var n=(t.length-1)*e,r=Math.floor(n),a=Math.ceil(n);e=n-r;var s=t[r],o=t[a],l=s.map((function(t,n){return t=i(t,o[n],e),n<3&&(t=Math.round(t)),t}));return 1===l[3]?"rgb("+l.slice(0,3)+")":"rgba("+l+")"}};var C={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},V=/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/,L=/rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}|.*)\)/,Y=/hsla\((\d{1,3}),\s*(\d{1,3})\%,\s*(\d{1,3})\%,\s*(\d{1,3}|.*)\)/,q=/hsl\((\d{1,3}),\s*(\d{1,3})\%,\s*(\d{1,3})\%\)/,U=/^#?([a-fA-F\d]{2})([a-fA-F\d]{2})([a-fA-F\d]{2})$/;function B(t){var e;if(t.match(V))return[(e=t.match(V).slice(1,4).map((function(t){return parseInt(t)})))[0],e[1],e[2],1];if(t.match(L))return[(e=t.match(L).slice(1,5).map((function(t){return parseFloat(t)})))[0],e[1],e[2],e[3]];if(t.match(q))return e=t.match(q).slice(1,4).map((function(t){return parseInt(t)})),[].concat(u(N(e[0],e[1],e[2])),[1]);if(t.match(Y))return e=t.match(Y).slice(1,5).map((function(t){return parseFloat(t)})),[].concat(u(N(e[0],e[1],e[2])),[e[3]]);if(t.match(U))return[].concat(u(X(t)),[1]);if("string"==typeof t){var i=C[t];return void 0!==i?[].concat(u(X(i)),[1]):[0,0,0,0]}return console.warn('I have no idea what "'.concat(t,' is."')),[0,0,0,0]}function N(t,e,i){if(i/=100,0===(e/=100))return[i,i,i];var n=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t};t/=360;var r=i<.5?i*(1+e):i+e-i*e,a=2*i-r;return[Math.round(255*n(a,r,t+1/3)),Math.round(255*n(a,r,t)),Math.round(255*n(a,r,t-1/3))]}function X(t){var e=U.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(console.warn("Invalid hex used: ".concat(t)),[0,0,0])}function D(t){return t?"rgba(".concat(B(t).join(","),")"):(console.warn("Incorrect color: ".concat(t)),"rgba(0,0,0,0)")}function H(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i?Math.floor(Math.random()*(e-t+1))+t:Math.random()*(e-t)+t}function K(t,e){var i={};return Object.entries(e).forEach((function(e){var n=f(e,2),r=n[0],a=n[1];t[r]!==a&&(i[r]=a)})),i}function G(t,e,i,n,r){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=0;(s=(e/n+(s=t/i))/2)>1?s=1:s<0&&(s=0);var o,l=j(r)(s);return l.match(V)?(o=l.match(V).slice(1,4).map((function(t){return parseInt(t)})),a?"rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", 1)"):[o[0],o[1],o[2],1]):l.match(L)?(o=l.match(L).slice(1,5).map((function(t){return parseFloat(t)})),a?"rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],", ").concat(o[3],")"):[o[0],o[1],o[2],o[3]]):a?"rgba(0,0,0,0)":[0,0,0,0]}function W(t,e){return Number(Math.round(+(t+"e"+e))+"e-"+e)}var $=function(){function t(i,n){e(this,t),r(this,"canvas",void 0),r(this,"settings",void 0),r(this,"animating",!1),r(this,"dim",void 0),r(this,"stats",void 0),r(this,"timings",void 0),this.resize=this.resize.bind(this),this.canvas=i,this.settings=n,this.dim={width:0,height:0},this.stats=new P,this.timings={triangles:new J,particles:new J},n.color1&&n.color2&&"string"==typeof n.color1&&"string"==typeof n.color2?this.settings.colors=[D(n.color1),D(n.color2)]:this.settings.colors&&(this.settings.colors=this.settings.colors.map((function(t){return D(t)}))),n.automaticResize&&window.addEventListener("resize",this.resize),this.resize(null,!1)}return n(t,[{key:"debug",value:function(){this.stats.showPanel(0),document.body.appendChild(this.stats.dom)}},{key:"resize",value:function(){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=this.canvas.parentElement;e&&(this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight),this.dim.width===this.canvas.width&&this.dim.height===this.canvas.height||(this.dim.width=this.canvas.width,this.dim.height=this.canvas.height,t&&this.init())}},{key:"stop",value:function(){this.animating&&(this.animating=!1)}},{key:"resume",value:function(){this.animating||(this.animating=!0)}}]),t}(),J=function(){function t(){e(this,t),r(this,"min",1/0),r(this,"max",0),r(this,"current",0),r(this,"curTime",0)}return n(t,[{key:"set",value:function(t){t<this.min&&(this.min=t),t>this.max&&(this.max=t),this.current=t}},{key:"start",value:function(){this.curTime=performance.now()}},{key:"end",value:function(){this.set(performance.now()-this.curTime)}}]),t}(),Q={count:[2,5],interval:[5e3,1e4],radius:[1,2],opacity:[.1,.7],color:"#ffffff",variationX:[5,15],variationY:[2.5,7.5]},Z={triangleSize:130,bleed:120,noise:60,colors:["rgba(11,135,147,1)","rgba(54,0,51,1)"],pointVariationX:20,pointVariationY:35,pointAnimationSpeed:7500,maxFps:144,animationOffset:250,image:void 0,imageOpacity:.4,automaticResize:!0,particleSettings:Q};var tt=function(t){s(l,t);var i=function(t){function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var i,n=o(t);if(e()){var r=o(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return c(this,i)}}(l);function l(t,n){var a;return e(this,l),r(h(a=i.call(this,t,n)),"ctx",void 0),r(h(a),"animating",!1),r(h(a),"pattern",void 0),r(h(a),"points",void 0),r(h(a),"triangles",void 0),r(h(a),"particles",void 0),r(h(a),"lastDraw",void 0),a.points=[],a.triangles=[],a.particles=[],a.lastDraw=0,a.ctx=t.getContext("2d"),a.settings.image&&(a.pattern=a.ctx.createPattern(a.settings.image,"repeat")),a.init(),a.animate(),a}return n(l,null,[{key:"create",value:function(t,e){if(t)return e&&(e.particleSettings=a({},Q,e.particleSettings)),new l(t,a({},Z,e));console.warn("Need a valid canvas element!")}}]),n(l,[{key:"init",value:function(){this.stop(),this.setupPoints(),this.delaunate(),this.particulate(),this.resume()}},{key:"particulate",value:function(){this.particles=[];for(var t=this.settings.particleSettings.count,e=this.dim.height*this.dim.width/1e4,i=0;i<e;i++){var n=t;Array.isArray(t)&&(n=H(t[0],t[1],!0));for(var r=0;r<n;r++)this.particles.push(new it(this))}}},{key:"setupPoints",value:function(){this.points=[];for(var t=this.settings.triangleSize,e=this.settings.bleed,i=-e;i<this.dim.width+e;i+=t)for(var n=-e;n<this.dim.height+e;n+=t)this.points.push({initX:i,initY:n,x:i,y:n,xNoise:H(0,1),yNoise:H(0,1)})}},{key:"delaunate",value:function(){var t=this.settings.noise;this.triangles=[];for(var e=this.points.map((function(e){return[W(e.x+e.xNoise*t,14),W(e.y+e.yNoise*t,14)]})),i=p.from(e).triangles,n=0;n<i.length;n+=3)this.triangles.push(new et(this,i.slice(n,n+3)))}},{key:"updateSettings",value:function(t){var e=K(this.settings,t);if(t.force&&(e=t),e.triangleSize&&(this.settings.triangleSize=e.triangleSize,this.setupPoints(),this.delaunate()),e.bleed&&(this.settings.bleed=e.bleed,this.setupPoints(),this.delaunate()),e.noise){var i=e.noise;this.settings.noise=i,i>this.settings.triangleSize&&this.delaunate()}e.colors&&(Array.isArray(e.colors)&&(this.settings.colors=e.colors.map((function(t){return D(t)}))),this.triangles.forEach((function(t){t.updateColor()}))),e.pointVariationX&&(this.settings.pointVariationX=e.pointVariationX),e.pointVariationY&&(this.settings.pointVariationY=e.pointVariationY),e.pointAnimationSpeed&&(this.settings.pointAnimationSpeed=e.pointAnimationSpeed),e.maxFps&&(this.settings.maxFps=e.maxFps),e.animationOffset&&(this.settings.animationOffset=e.animationOffset),e.image&&(this.settings.image=e.image,this.pattern=this.ctx.createPattern(this.settings.image,"repeat")),e.imageOpacity&&(this.settings.imageOpacity=e.imageOpacity),void 0!==e.automaticResize&&(this.settings.automaticResize=e.automaticResize,e.automaticResize?window.addEventListener("resize",this.resize):window.removeEventListener("resize",this.resize)),e.particleSettings&&(e=e.particleSettings,this.settings.particleSettings=a({},this.settings.particleSettings,e),this.particles.forEach((function(t){t.updateSettings(e)})),e.count&&this.particulate())}},{key:"updatePoints",value:function(){var t=this.settings.animationOffset,e=this.settings.pointVariationX,i=this.settings.pointVariationY,n=this.settings.pointAnimationSpeed,r=2*Math.PI*performance.now()/n;this.points=this.points.map((function(n){var a=n.initX/t;return n.x=n.initX+Math.sin(a+r)*e,n.y=n.initY+Math.cos(a+r)*i,n}))}},{key:"stop",value:function(){this.animating&&(this.animating=!1)}},{key:"resume",value:function(){this.animating||(this.animating=!0)}},{key:"animate",value:function(){var t=performance.now();if(requestAnimationFrame(this.animate.bind(this)),this.animating){var e=t-this.lastDraw,i=1e3/this.settings.maxFps;if(!(e<i)){this.lastDraw=t-e%i,this.stats.begin();var n=this.ctx;n.clearRect(0,0,this.dim.width,this.dim.height),this.timings.triangles.start(),this.triangles.forEach((function(t){t.draw()})),this.timings.triangles.end(),this.timings.particles.start(),this.particles.forEach((function(t){t.draw()})),this.timings.particles.end(),this.pattern&&(n.globalAlpha=this.settings.imageOpacity,n.fillStyle=this.pattern,n.fillRect(0,0,this.dim.width,this.dim.height),n.globalAlpha=1),this.updatePoints(),this.stats.end()}}}}]),l}($),et=function(){function t(i,n){e(this,t),r(this,"parent",void 0),r(this,"points",void 0),r(this,"color",""),this.parent=i,this.points=n,this.updateColor()}return n(t,[{key:"updateColor",value:function(){for(var t=this.parent.settings.noise,e=this.getPoints(),i={x:0,y:0},n=0;n<e.length;n++){var r=e[n];i.x+=r.x+r.xNoise*t,i.y+=r.y+r.yNoise*t}i.x=i.x/3,i.y=i.y/3,this.color=G(i.x,i.y,this.parent.dim.width,this.parent.dim.height,this.parent.settings.colors)}},{key:"getPoints",value:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.parent.points[this.points[e]]);return t}},{key:"lines",value:function(){var t=this.parent.ctx,e=this.parent.settings.noise,i=this.getPoints();t.fillStyle=this.color,t.strokeStyle=this.color,t.lineWidth=1,t.beginPath(),i.forEach((function(i,n){var r=i.x+i.xNoise*e,a=i.y+i.yNoise*e;0===n?t.moveTo(r,a):t.lineTo(r,a)})),t.closePath()}},{key:"stroke",value:function(){this.lines(),this.parent.ctx.stroke()}},{key:"fill",value:function(){this.lines(),this.parent.ctx.fill()}},{key:"draw",value:function(){this.lines(),this.parent.ctx.fill(),this.parent.ctx.stroke()}}]),t}(),it=function(){function t(i){e(this,t),r(this,"parent",void 0),r(this,"color",void 0),r(this,"x",void 0),r(this,"y",void 0),r(this,"opacity",0),r(this,"radius",void 0),r(this,"interval",void 0),r(this,"variationX",void 0),r(this,"variationY",void 0),this.parent=i;var n=this.parent.dim;this.x=H(0,n.width),this.y=H(0,n.height),this.updateSettings(this.parent.settings.particleSettings)}return n(t,[{key:"updateSettings",value:function(t){if(t.color||t.opacity){var e=B(this.parent.settings.particleSettings.color),i=t.opacity?this.parent.settings.particleSettings.opacity:this.opacity;Array.isArray(i)&&(i=H(i[0],i[1])),this.opacity=i,this.color="rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(i,")")}if(t.radius){var n=t.radius;this.radius=n,Array.isArray(n)&&(this.radius=H(n[0],n[1]))}if(t.interval){var r=t.interval;this.interval=r,Array.isArray(r)&&(this.interval=H(r[0],r[1]))}if(t.variationX){var a=t.variationX;this.variationX=a,Array.isArray(a)&&(this.variationX=H(a[0],a[1]))}if(t.variationY){var s=t.variationY;this.variationY=s,Array.isArray(s)&&(this.variationY=H(s[0],s[1]))}}},{key:"shape",value:function(){var t=this.parent.ctx;t.beginPath(),t.fillStyle=this.color,t.strokeStyle=this.color;var e=this.x+Math.sin(2*Math.PI*performance.now()/this.interval)*this.variationX,i=this.y+Math.cos(2*Math.PI*performance.now()/this.interval)*this.variationY;t.arc(e,i,this.radius,0,2*Math.PI)}},{key:"stroke",value:function(){this.shape(),this.parent.ctx.stroke()}},{key:"fill",value:function(){this.shape(),this.parent.ctx.fill()}},{key:"draw",value:function(){this.shape(),this.parent.ctx.fill()}}]),t}();function nt(t,e,i){var n=t.createShader(e);if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(r)}return n}var rt=function(t){s(l,t);var i=function(t){function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var i,n=o(t);if(e()){var r=o(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return c(this,i)}}(l);function l(t,n){var a;e(this,l),r(h(a=i.call(this,t,n)),"gl",void 0),r(h(a),"triangleShaderProgram",void 0),r(h(a),"verticeCount",void 0),a.verticeCount=0,a.gl=t.getContext("webgl");var s,o,c,u=f((s="#shader vertex\r\n\r\nattribute vec2 aVertexPosition;\r\nattribute vec4 aColor;\r\n\r\nuniform vec2 uResolution;\r\nuniform float uAnimationOffset;\r\nuniform float uTime;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main(){\r\n\tvec2 translate = aVertexPosition / uResolution;\r\n\ttranslate = translate * 2.0;\r\n\ttranslate = translate - 1.0;\r\n\r\n\tvColor = aColor;\r\n\r\n\tgl_Position = vec4(translate * vec2(1, -1), 0, 1);\r\n}\r\n\r\n#shader fragment\r\nprecision mediump float;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main(){\r\n\tgl_FragColor = vColor;\r\n}".split("\n"),o=[[],[]],c=null,s.forEach((function(t){if(t.includes("#shader"))return t.includes("vertex")&&(c=0),void(t.includes("fragment")&&(c=1));null!==c&&o[c].push(t)})),o.map((function(t){return t.join("\n")}))),2),d=u[0],g=u[1];return a.triangleShaderProgram=function(t,e,i){var n=nt(t,t.VERTEX_SHADER,e),r=nt(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,n),t.attachShader(a,r),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw t.deleteProgram(a),new Error(t.getProgramInfoLog(a));return a}(a.gl,d,g),a.init(),a.animate(),a}return n(l,null,[{key:"webglSupport",value:function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&t.getContext("webgl")}catch(t){return!1}}},{key:"create",value:function(t,e){if(t){if(this.webglSupport())return e&&(e.particleSettings=a({},Q,e.particleSettings)),new l(t,a({},Z,e));console.warn("Your browser does not support webgl :(")}else console.warn("Need a valid canvas element!")}}]),n(l,[{key:"generateVertices",value:function(){for(var t=[],e=[],i=[],n=this.settings.triangleSize,r=this.settings.bleed,a=-r;a<this.dim.width+r;a+=n)for(var s=-r;s<this.dim.height+r;s+=n)t.push([a,s]);for(var o=p.from(t).triangles,l=0;l<o.length;l+=3){var h=t[o[l]],c=t[o[l+1]],f=t[o[l+2]],u={x:(h[0]+c[0]+f[0])/3,y:(h[1]+c[1]+f[1])/3},d=G(u.x,u.y,this.dim.width,this.dim.height,this.settings.colors,!1).map((function(t){return t>1?t/255:t}));e.push(d),e.push(d),e.push(d)}for(var g=0;g<o.length;g++)i.push(t[o[g]]);this.setColorBuffer(e),this.setVertexBuffer(i),this.verticeCount=i.length}},{key:"setColorBuffer",value:function(t){var e=this.gl,i=e.getAttribLocation(this.triangleShaderProgram,"aColor"),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);var r=new Float32Array(t.reduce((function(t,e){return t.concat(e)}),[]));e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(i)}},{key:"setVertexBuffer",value:function(t){var e=this.gl,i=e.getAttribLocation(this.triangleShaderProgram,"aVertexPosition"),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.enableVertexAttribArray(i);var r=new Float32Array(t.reduce((function(t,e){return t.concat(e)}),[]));e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0)}},{key:"init",value:function(){this.stop();var t=this.gl;t.viewport(0,0,t.canvas.width,t.canvas.height),t.useProgram(this.triangleShaderProgram),this.generateVertices(),this.generateVertices();var e=t.getUniformLocation(this.triangleShaderProgram,"uAnimationOffset");t.uniform1f(e,this.settings.animationOffset);var i=t.getUniformLocation(this.triangleShaderProgram,"uResolution");t.uniform2f(i,t.canvas.width,t.canvas.height),this.resume()}},{key:"animate",value:function(){var t,e,i,n;(requestAnimationFrame(this.animate.bind(this)),this.animating)&&(this.stats.begin(),t=this.gl,e=this.triangleShaderProgram,i=this.verticeCount,n=t.getUniformLocation(e,"uTime"),t.uniform1f(n,performance.now()),t.drawArrays(t.TRIANGLES,0,i),this.stats.end())}},{key:"updateSettings",value:function(t){var e=K(this.settings,t);if(t.force&&(e=t),e.triangleSize&&(this.settings.triangleSize=e.triangleSize,this.setupPoints(),this.delaunate()),e.bleed&&(this.settings.bleed=e.bleed,this.setupPoints(),this.delaunate()),e.noise){var i=e.noise;this.settings.noise=i,i>this.settings.triangleSize&&this.delaunate()}if(e.colors&&(Array.isArray(e.colors)&&(this.settings.colors=e.colors.map((function(t){return getRGBA(t)}))),this.triangles.forEach((function(t){t.updateColor()}))),e.pointVariationX&&(this.settings.pointVariationX=e.pointVariationX),e.pointVariationY&&(this.settings.pointVariationY=e.pointVariationY),e.pointAnimationSpeed&&(this.settings.pointAnimationSpeed=e.pointAnimationSpeed),e.maxFps&&(this.settings.maxFps=e.maxFps),e.animationOffset){this.settings.animationOffset=e.animationOffset;var n=this.gl.getUniformLocation(this.triangleShaderProgram,"uAnimationOffset");this.gl.uniform1f(n,this.settings.animationOffset)}e.image&&(this.settings.image=e.image),e.imageOpacity&&(this.settings.imageOpacity=e.imageOpacity),void 0!==e.automaticResize&&(this.settings.automaticResize=e.automaticResize,e.automaticResize?window.addEventListener("resize",this.resize):window.removeEventListener("resize",this.resize)),e.particleSettings}}]),l}($);t.Thpace=tt,t.ThpaceGL=rt,Object.defineProperty(t,"__esModule",{value:!0})}));
