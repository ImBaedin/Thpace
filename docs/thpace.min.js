!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Thpace=e()}(this,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],n=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const o=Math.pow(2,-52),l=new Uint32Array(512);class h{static from(t,e=y,i=v){const n=t.length,a=new Float64Array(2*n);for(let r=0;r<n;r++){const n=t[r];a[2*r]=e(n),a[2*r+1]=i(n)}return new h(a)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*i),this._halfedges=new Int32Array(3*i),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:i,_hullTri:n,_hullHash:a}=this,r=t.length>>1;let s=1/0,l=1/0,h=-1/0,f=-1/0;for(let e=0;e<r;e++){const i=t[2*e],n=t[2*e+1];i<s&&(s=i),n<l&&(l=n),i>h&&(h=i),n>f&&(f=n),this._ids[e]=e}const d=(s+h)/2,m=(l+f)/2;let y,v,b,w=1/0;for(let e=0;e<r;e++){const i=c(d,m,t[2*e],t[2*e+1]);i<w&&(y=e,w=i)}const k=t[2*y],_=t[2*y+1];w=1/0;for(let e=0;e<r;e++){if(e===y)continue;const i=c(k,_,t[2*e],t[2*e+1]);i<w&&i>0&&(v=e,w=i)}let x=t[2*v],S=t[2*v+1],A=1/0;for(let e=0;e<r;e++){if(e===y||e===v)continue;const i=g(k,_,x,S,t[2*e],t[2*e+1]);i<A&&(b=e,A=i)}let M=t[2*b],P=t[2*b+1];if(A===1/0){for(let e=0;e<r;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];p(this._ids,this._dists,0,r-1);const e=new Uint32Array(r);let i=0;for(let t=0,n=-1/0;t<r;t++){const a=this._ids[t];this._dists[a]>n&&(e[i++]=a,n=this._dists[a])}return this.hull=e.subarray(0,i),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(u(k,_,x,S,M,P)){const t=v,e=x,i=S;v=b,x=M,S=P,b=t,M=e,P=i}const I=function(t,e,i,n,a,r){const s=i-t,o=n-e,l=a-t,h=r-e,c=s*s+o*o,f=l*l+h*h,u=.5/(s*h-o*l);return{x:t+(h*c-o*f)*u,y:e+(s*f-l*c)*u}}(k,_,x,S,M,P);this._cx=I.x,this._cy=I.y;for(let e=0;e<r;e++)this._dists[e]=c(t[2*e],t[2*e+1],I.x,I.y);p(this._ids,this._dists,0,r-1),this._hullStart=y;let z=3;i[y]=e[b]=v,i[v]=e[y]=b,i[b]=e[v]=y,n[y]=0,n[v]=1,n[b]=2,a.fill(-1),a[this._hashKey(k,_)]=y,a[this._hashKey(x,S)]=v,a[this._hashKey(M,P)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let r,s,l=0;l<this._ids.length;l++){const h=this._ids[l],c=t[2*h],f=t[2*h+1];if(l>0&&Math.abs(c-r)<=o&&Math.abs(f-s)<=o)continue;if(r=c,s=f,h===y||h===v||h===b)continue;let d=0;for(let t=0,e=this._hashKey(c,f);t<this._hashSize&&(d=a[(e+t)%this._hashSize],-1===d||d===i[d]);t++);d=e[d];let g,p=d;for(;g=i[p],!u(c,f,t[2*p],t[2*p+1],t[2*g],t[2*g+1]);)if(p=g,p===d){p=-1;break}if(-1===p)continue;let m=this._addTriangle(p,h,i[p],-1,-1,n[p]);n[h]=this._legalize(m+2),n[p]=m,z++;let w=i[p];for(;g=i[w],u(c,f,t[2*w],t[2*w+1],t[2*g],t[2*g+1]);)m=this._addTriangle(w,h,g,n[h],-1,n[w]),n[h]=this._legalize(m+2),i[w]=w,z--,w=g;if(p===d)for(;g=e[p],u(c,f,t[2*g],t[2*g+1],t[2*p],t[2*p+1]);)m=this._addTriangle(g,h,p,-1,n[p],n[g]),this._legalize(m+2),n[g]=m,i[p]=p,z--,p=g;this._hullStart=e[h]=p,i[p]=e[w]=h,i[h]=w,a[this._hashKey(c,f)]=h,a[this._hashKey(t[2*p],t[2*p+1])]=p}this.hull=new Uint32Array(z);for(let t=0,e=this._hullStart;t<z;t++)this.hull[t]=e,e=i[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:i,coords:n}=this;let a=0,r=0;for(;;){const s=i[t],o=t-t%3;if(r=o+(t+2)%3,-1===s){if(0===a)break;t=l[--a];continue}const h=s-s%3,c=o+(t+1)%3,f=h+(s+2)%3,u=e[r],g=e[t],p=e[c],m=e[f];if(d(n[2*u],n[2*u+1],n[2*g],n[2*g+1],n[2*p],n[2*p+1],n[2*m],n[2*m+1])){e[t]=m,e[s]=u;const n=i[f];if(-1===n){let e=this._hullStart;do{if(this._hullTri[e]===f){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,n),this._link(s,i[r]),this._link(r,f);const o=h+(s+1)%3;a<l.length&&(l[a++]=o)}else{if(0===a)break;t=l[--a]}}return r}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,i,n,a,r){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=i,this._link(s,n),this._link(s+1,a),this._link(s+2,r),this.trianglesLen+=3,s}}function c(t,e,i,n){const a=t-i,r=e-n;return a*a+r*r}function f(t,e,i,n,a,r){const s=(n-e)*(a-t),o=(i-t)*(r-e);return Math.abs(s-o)>=33306690738754716e-32*Math.abs(s+o)?s-o:0}function u(t,e,i,n,a,r){return(f(a,r,t,e,i,n)||f(t,e,i,n,a,r)||f(i,n,a,r,t,e))<0}function d(t,e,i,n,a,r,s,o){const l=t-s,h=e-o,c=i-s,f=n-o,u=a-s,d=r-o,g=c*c+f*f,p=u*u+d*d;return l*(f*p-g*d)-h*(c*p-g*u)+(l*l+h*h)*(c*d-f*u)<0}function g(t,e,i,n,a,r){const s=i-t,o=n-e,l=a-t,h=r-e,c=s*s+o*o,f=l*l+h*h,u=.5/(s*h-o*l),d=(h*c-o*f)*u,g=(s*f-l*c)*u;return d*d+g*g}function p(t,e,i,n){if(n-i<=20)for(let a=i+1;a<=n;a++){const n=t[a],r=e[n];let s=a-1;for(;s>=i&&e[t[s]]>r;)t[s+1]=t[s--];t[s+1]=n}else{let a=i+1,r=n;m(t,i+n>>1,a),e[t[i]]>e[t[n]]&&m(t,i,n),e[t[a]]>e[t[n]]&&m(t,a,n),e[t[i]]>e[t[a]]&&m(t,i,a);const s=t[a],o=e[s];for(;;){do{a++}while(e[t[a]]<o);do{r--}while(e[t[r]]>o);if(r<a)break;m(t,a,r)}t[i+1]=t[r],t[r]=s,n-a+1>=r-i?(p(t,e,a,n),p(t,e,i,r-1)):(p(t,e,i,r-1),p(t,e,a,n))}}function m(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function y(t){return t[0]}function v(t){return t[1]}var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var w=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){var i;t.exports=((i=function(){function t(t){return a.appendChild(t.dom),t}function e(t){for(var e=0;e<a.children.length;e++)a.children[e].style.display=e===t?"block":"none";n=t}var n=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",(function(t){t.preventDefault(),e(++n%a.children.length)}),!1);var r=(performance||Date).now(),s=r,o=0,l=t(new i.Panel("FPS","#0ff","#002")),h=t(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new i.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:a,addPanel:t,showPanel:e,begin:function(){r=(performance||Date).now()},end:function(){o++;var t=(performance||Date).now();if(h.update(t-r,200),t>s+1e3&&(l.update(1e3*o/(t-s),100),s=t,o=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:a,setMode:e}}).Panel=function(t,e,i){var n=1/0,a=0,r=Math.round,s=r(window.devicePixelRatio||1),o=80*s,l=48*s,h=3*s,c=2*s,f=3*s,u=15*s,d=74*s,g=30*s,p=document.createElement("canvas");p.width=o,p.height=l,p.style.cssText="width:80px;height:48px";var m=p.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,o,l),m.fillStyle=e,m.fillText(t,h,c),m.fillRect(f,u,d,g),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(f,u,d,g),{dom:p,update:function(l,y){n=Math.min(n,l),a=Math.max(a,l),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,o,u),m.fillStyle=e,m.fillText(r(l)+" "+t+" ("+r(n)+"-"+r(a)+")",h,c),m.drawImage(p,f+s,u,d-s,g,f,u,d-s,g),m.fillRect(f+d-s,u,s,g),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(f+d-s,u,s,r((1-l/y)*g))}}},i)})),k={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},_=Object.prototype.toString,x=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},S=function(t){var e,i,n=[],a=1;if("string"==typeof t)if(k[t])n=k[t].slice(),i="rgb";else if("transparent"===t)a=0,i="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var r=(l=t.slice(1)).length;a=1,r<=4?(n=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],4===r&&(a=parseInt(l[3]+l[3],16)/255)):(n=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],8===r&&(a=parseInt(l[6]+l[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var s=e[1],o="rgb"===s,l=s.replace(/a$/,"");i=l;r="cmyk"===l?4:"gray"===l?1:3;n=e[2].trim().split(/\s*,\s*/).map((function(t,e){if(/%$/.test(t))return e===r?parseFloat(t)/100:"rgb"===l?255*parseFloat(t)/100:parseFloat(t);if("h"===l[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==A[t])return A[t]}return parseFloat(t)})),s===l&&n.push(1),a=o||void 0===n[r]?1:n[r],n=n.slice(0,r)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(n=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),i=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(c=t,"[object Object]"!==_.call(c)||null!==(f=Object.getPrototypeOf(c))&&f!==Object.getPrototypeOf({}))(Array.isArray(t)||b.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(n=[t[0],t[1],t[2]],i="rgb",a=4===t.length?t[3]:1);else{var h=x(t.r,t.red,t.R,null);null!==h?(i="rgb",n=[h,x(t.g,t.green,t.G),x(t.b,t.blue,t.B)]):(i="hsl",n=[x(t.h,t.hue,t.H),x(t.s,t.saturation,t.S),x(t.l,t.lightness,t.L,t.b,t.brightness)]),a=x(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(a/=100)}else i="rgb",n=[t>>>16,(65280&t)>>>8,255&t];var c,f;return{space:i,values:n,alpha:a}},A={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var M=function(t){var e,i,n,a,r,s=t[0]/360,o=t[1]/100,l=t[2]/100;if(0===o)return[r=255*l,r,r];e=2*l-(i=l<.5?l*(1+o):l+o-l*o),a=[0,0,0];for(var h=0;h<3;h++)(n=s+1/3*-(h-1))<0?n++:n>1&&n--,r=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,a[h]=255*r;return a};var P=function(t,e,i){return t*(1-i)+e*i},I=function(t,e,i){return e<i?t<e?e:t>i?i:t:t<i?i:t>e?e:t};var z=function(t){return t=t.map((function(t){if("rgb"!=(t=S(t)).space){if("hsl"!=t.space)throw"c.spacespace is not supported.";t.values=M(t.values)}return t.values.push(t.alpha),t.values})),function(e,i){i=i||P,e=I(e,0,1);var n=(t.length-1)*e,a=Math.floor(n),r=Math.ceil(n);e=n-a;var s=t[a],o=t[r],l=s.map((function(t,n){return t=i(t,o[n],e),n<3&&(t=Math.round(t)),t}));return 1===l[3]?"rgb("+l.slice(0,3)+")":"rgba("+l+")"}};var O={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},T=/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)/,j=/rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}|.*)\)/,F=/hsla\((\d{1,3}),\s*(\d{1,3})\%,\s*(\d{1,3})\%,\s*(\d{1,3}|.*)\)/,q=/hsl\((\d{1,3}),\s*(\d{1,3})\%,\s*(\d{1,3})\%\)/,E=/^#?([a-fA-F\d]{2})([a-fA-F\d]{2})([a-fA-F\d]{2})$/;function N(t){var e;if(t.match(T))return[(e=t.match(T).slice(1,4).map((function(t){return parseInt(t)})))[0],e[1],e[2],1];if(t.match(j))return[(e=t.match(j).slice(1,5).map((function(t){return parseFloat(t)})))[0],e[1],e[2],e[3]];if(t.match(q))return e=t.match(q).slice(1,4).map((function(t){return parseInt(t)})),[].concat(s(X(e[0],e[1],e[2])),[1]);if(t.match(F))return e=t.match(F).slice(1,5).map((function(t){return parseFloat(t)})),[].concat(s(X(e[0],e[1],e[2])),[e[3]]);if(t.match(E))return[].concat(s(Y(t)),[1]);if("string"==typeof t){var i=O[t];return void 0!==i?[].concat(s(Y(i)),[1]):[0,0,0,0]}return console.warn('I have no idea what "'.concat(t,' is."')),[0,0,0,0]}function X(t,e,i){if(i/=100,0===(e/=100))return[i,i,i];var n=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t};t/=360;var a=i<.5?i*(1+e):i+e-i*e,r=2*i-a;return[Math.round(255*n(r,a,t+1/3)),Math.round(255*n(r,a,t)),Math.round(255*n(r,a,t-1/3))]}function Y(t){var e=E.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(console.warn("Invalid hex used: ".concat(t)),[0,0,0])}function V(t){return t?"rgba(".concat(N(t).join(","),")"):(console.warn("Incorrect color: ".concat(t)),"rgba(0,0,0,0)")}function R(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i?Math.floor(Math.random()*(e-t+1))+t:Math.random()*(e-t)+t}function L(t,e){return Number(Math.round(+(t+"e"+e))+"e-"+e)}var U={count:[2,5],interval:[5e3,1e4],radius:[1,2],opacity:[.1,.7],color:"#ffffff",variationX:[5,15],variationY:[2.5,7.5]},C={triangleSize:130,bleed:120,noise:60,colors:["rgba(11,135,147,1)","rgba(54,0,51,1)"],pointVariationX:20,pointVariationY:35,pointAnimationSpeed:7500,maxFps:144,animationOffset:250,image:void 0,imageOpacity:.4,particleSettings:U},D=function(){function e(i,a){var r=this;t(this,e),n(this,"canvas",void 0),n(this,"ctx",void 0),n(this,"settings",void 0),n(this,"animating",!1),n(this,"pattern",void 0),n(this,"dim",void 0),n(this,"points",void 0),n(this,"triangles",void 0),n(this,"particles",void 0),n(this,"stats",void 0),n(this,"lastDraw",void 0),n(this,"timings",void 0),this.canvas=i,this.settings=a,this.dim={width:0,height:0},this.points=[],this.triangles=[],this.particles=[],this.stats=new w,this.lastDraw=0,this.timings={triangles:new B,particles:new B},a.color1&&a.color2&&"string"==typeof a.color1&&"string"==typeof a.color2?this.settings.colors=[V(a.color1),V(a.color2)]:this.settings.colors&&(this.settings.colors=this.settings.colors.map((function(t){return V(t)}))),this.ctx=i.getContext("2d"),this.settings.image&&(this.pattern=this.ctx.createPattern(this.settings.image,"repeat")),window.addEventListener("resize",(function(){r.resize()})),this.resize(!1),this.init(),this.animate()}return i(e,null,[{key:"create",value:function(t,i){if(t)return i&&(i.particleSettings=a({},U,i.particleSettings)),new e(t,a({},C,i));console.warn("Need a valid canvas element!")}}]),i(e,[{key:"debug",value:function(){this.stats.showPanel(0),document.body.appendChild(this.stats.dom)}},{key:"resize",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.canvas.parentElement;e&&(this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight),this.dim.width===this.canvas.width&&this.dim.height===this.canvas.height||(this.dim.width=this.canvas.width,this.dim.height=this.canvas.height),t&&this.init()}},{key:"init",value:function(){this.stop(),this.setupPoints(),this.delaunate(),this.particulate(),this.resume()}},{key:"particulate",value:function(){this.particles=[];for(var t=this.settings.particleSettings.count,e=this.dim.height*this.dim.width/1e4,i=0;i<e;i++){var n=t;Array.isArray(t)&&(n=R(t[0],t[1],!0));for(var a=0;a<n;a++)this.particles.push(new K(this))}}},{key:"setupPoints",value:function(){this.points=[];for(var t=this.settings.triangleSize,e=this.settings.bleed,i=-e;i<this.dim.width+e;i+=t)for(var n=-e;n<this.dim.height+e;n+=t)this.points.push({initX:i,initY:n,x:i,y:n,xNoise:R(0,1),yNoise:R(0,1)})}},{key:"delaunate",value:function(){var t=this.settings.noise;this.triangles=[];for(var e=this.points.map((function(e){return[L(e.x+e.xNoise*t,14),L(e.y+e.yNoise*t,14)]})),i=h.from(e).triangles,n=0;n<i.length;n+=3)this.triangles.push(new H(this,i.slice(n,n+3)))}},{key:"updateSettings",value:function(t){var e=function(t,e){var i={};return Object.entries(e).forEach((function(e){var n=r(e,2),a=n[0],s=n[1];t[a]!==s&&(i[a]=s)})),i}(this.settings,t);if(t.force&&(e=t),e.triangleSize&&(this.settings.triangleSize=e.triangleSize,this.setupPoints(),this.delaunate()),e.bleed&&(this.settings.bleed=e.bleed,this.setupPoints(),this.delaunate()),e.noise){var i=e.noise;this.settings.noise=i,i>this.settings.triangleSize&&this.delaunate()}e.colors&&(Array.isArray(e.colors)&&(this.settings.colors=e.colors.map((function(t){return V(t)}))),this.triangles.forEach((function(t){t.updateColor()}))),e.pointVariationX&&(this.settings.pointVariationX=e.pointVariationX),e.pointVariationY&&(this.settings.pointVariationY=e.pointVariationY),e.pointAnimationSpeed&&(this.settings.pointAnimationSpeed=e.pointAnimationSpeed),e.maxFps&&(this.settings.maxFps=e.maxFps),e.animationOffset&&(this.settings.animationOffset=e.animationOffset),e.image&&(this.settings.image=e.image,this.pattern=this.ctx.createPattern(this.settings.image,"repeat")),e.imageOpacity&&(this.settings.imageOpacity=e.imageOpacity),e.particleSettings&&(e=e.particleSettings,this.settings.particleSettings=a({},this.settings.particleSettings,e),this.particles.forEach((function(t){t.updateSettings(e)})),e.count&&this.particulate())}},{key:"updatePoints",value:function(){var t=this.settings.animationOffset,e=this.settings.pointVariationX,i=this.settings.pointVariationY,n=this.settings.pointAnimationSpeed,a=2*Math.PI*performance.now()/n;this.points=this.points.map((function(n){var r=n.initX/t;return n.x=n.initX+Math.sin(r+a)*e,n.y=n.initY+Math.cos(r+a)*i,n}))}},{key:"stop",value:function(){this.animating&&(this.animating=!1)}},{key:"resume",value:function(){this.animating||(this.animating=!0)}},{key:"animate",value:function(){var t=performance.now();if(requestAnimationFrame(this.animate.bind(this)),this.animating){var e=t-this.lastDraw,i=1e3/this.settings.maxFps;if(!(e<i)){this.lastDraw=t-e%i,this.stats.begin();var n=this.ctx;n.clearRect(0,0,this.dim.width,this.dim.height),this.timings.triangles.start(),this.triangles.forEach((function(t){t.draw()})),this.timings.triangles.end(),this.timings.particles.start(),this.particles.forEach((function(t){t.draw()})),this.timings.particles.end(),this.pattern&&(n.globalAlpha=this.settings.imageOpacity,n.fillStyle=this.pattern,n.fillRect(0,0,this.dim.width,this.dim.height),n.globalAlpha=1),this.updatePoints(),this.stats.end()}}}}]),e}(),H=function(){function e(i,a){t(this,e),n(this,"parent",void 0),n(this,"points",void 0),n(this,"color",""),this.parent=i,this.points=a,this.updateColor()}return i(e,[{key:"updateColor",value:function(){for(var t=this.parent.settings.noise,e=this.getPoints(),i={x:0,y:0},n=0;n<e.length;n++){var a=e[n];i.x+=a.x+a.xNoise*t,i.y+=a.y+a.yNoise*t}i.x=i.x/3,i.y=i.y/3,this.color=function(t,e,i,n,a){var r=0;(r=(e/n+(r=t/i))/2)>1?r=1:r<0&&(r=0);var s,o=z(a)(r);return o.match(T)?(s=o.match(T).slice(1,4).map((function(t){return parseInt(t)})),"rgba(".concat(s[0],", ").concat(s[1],", ").concat(s[2],", 1)")):o.match(j)?(s=o.match(j).slice(1,5).map((function(t){return parseFloat(t)})),"rgba(".concat(s[0],", ").concat(s[1],", ").concat(s[2],", ").concat(s[3],")")):"rgba(0,0,0,0)"}(i.x,i.y,this.parent.dim.width,this.parent.dim.height,this.parent.settings.colors)}},{key:"getPoints",value:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.parent.points[this.points[e]]);return t}},{key:"lines",value:function(){var t=this.parent.ctx,e=this.parent.settings.noise,i=this.getPoints();t.fillStyle=this.color,t.strokeStyle=this.color,t.lineWidth=1,t.beginPath(),i.forEach((function(i,n){var a=i.x+i.xNoise*e,r=i.y+i.yNoise*e;0===n?t.moveTo(a,r):t.lineTo(a,r)})),t.closePath()}},{key:"stroke",value:function(){this.lines(),this.parent.ctx.stroke()}},{key:"fill",value:function(){this.lines(),this.parent.ctx.fill()}},{key:"draw",value:function(){this.lines(),this.parent.ctx.fill(),this.parent.ctx.stroke()}}]),e}(),K=function(){function e(i){t(this,e),n(this,"parent",void 0),n(this,"color",void 0),n(this,"x",void 0),n(this,"y",void 0),n(this,"opacity",0),n(this,"radius",void 0),n(this,"interval",void 0),n(this,"variationX",void 0),n(this,"variationY",void 0),this.parent=i;var a=this.parent.dim;this.x=R(0,a.width),this.y=R(0,a.height),this.updateSettings(this.parent.settings.particleSettings)}return i(e,[{key:"updateSettings",value:function(t){if(t.color||t.opacity){var e=N(this.parent.settings.particleSettings.color),i=t.opacity?this.parent.settings.particleSettings.opacity:this.opacity;Array.isArray(i)&&(i=R(i[0],i[1])),this.opacity=i,this.color="rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(i,")")}if(t.radius){var n=t.radius;this.radius=n,Array.isArray(n)&&(this.radius=R(n[0],n[1]))}if(t.interval){var a=t.interval;this.interval=a,Array.isArray(a)&&(this.interval=R(a[0],a[1]))}if(t.variationX){var r=t.variationX;this.variationX=r,Array.isArray(r)&&(this.variationX=R(r[0],r[1]))}if(t.variationY){var s=t.variationY;this.variationY=s,Array.isArray(s)&&(this.variationY=R(s[0],s[1]))}}},{key:"shape",value:function(){var t=this.parent.ctx;t.beginPath(),t.fillStyle=this.color,t.strokeStyle=this.color;var e=this.x+Math.sin(2*Math.PI*performance.now()/this.interval)*this.variationX,i=this.y+Math.cos(2*Math.PI*performance.now()/this.interval)*this.variationY;t.arc(e,i,this.radius,0,2*Math.PI)}},{key:"stroke",value:function(){this.shape(),this.parent.ctx.stroke()}},{key:"fill",value:function(){this.shape(),this.parent.ctx.fill()}},{key:"draw",value:function(){this.shape(),this.parent.ctx.fill()}}]),e}(),B=function(){function e(){t(this,e),n(this,"min",1/0),n(this,"max",0),n(this,"current",0),n(this,"curTime",0)}return i(e,[{key:"set",value:function(t){t<this.min&&(this.min=t),t>this.max&&(this.max=t),this.current=t}},{key:"start",value:function(){this.curTime=performance.now()}},{key:"end",value:function(){this.set(performance.now()-this.curTime)}}]),e}();return D}));
